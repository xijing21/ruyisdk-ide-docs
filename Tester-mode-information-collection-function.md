## 功能提案：测试人员模式信息收集功能

### 1. 概述

为提升软件测试的效率与质量，建议在应用中加入一个可选的“测试人员模式”，以便更好地收集用户反馈和故障信息。该模式将根据用户的身份分类收集不同程度的信息。

### 2. 用户身份分类

- **普通用户**

  - 默认状态：禁用信息收集
  - 收集信息：基础的使用数据和错误报告：
    - **包管理器初次安装（上报 first-run 事件的 unique uuid ）**
    - **包管理器下载安装的资源的类型及次数  （ruyi install、ruyi extra ）**
      - 比如最终需要统计到如下数据： upstream gcc a.b x次、demo1 y次、plct gcc x.y n次之类
    - **编译次数：记录用户调用编译器执行编译的次数（间接反应了开发次数）**
    - **错误日志：** installation id、系统基本信息（os 版本号，内核版本号，/proc/cpuinfo, /proc/meminfo 等）、exception traceback等等
- **测试人员**

  - 选项：用户在安装过程中确认身份为测试人员
  - 收集信息：全面的设备信息、系统ID、网络状态、日志文件等，以支持深入的故障排查：
    - **RISC-V设备型号**（无法采集，需要提供设置命令）
    - RISC-V处理器信息（如核心数、频率、架构版本）
    - 硬件配置：内存或存储情况
    - 操作系统详细信息（包括内核版本、gcc、glibc等版本？）
    - 网络：如网络连接异常 ？
    - 安装的包列表及其版本
    - 包的安装、更新、卸载频率
    - 网络请求日志（用于下载包和更新）
    - 错误日志和崩溃报告（匿名化处理）
    - 测试人员自定义：由测试人员自定义的脚本或者配置文件内容？

### 3. 功能实现

#### 3.0 隐私政策

- 制定一个详细的隐私政策，说明数据收集内容、目的、数据存储和安全措施，用户权力等内容：
  - 收集的数据类型
  - 数据使用目的
  - 数据存储和安全措施
  - 用户权利（如访问、更正、删除数据的权利）
  - 联系方式和投诉途径

#### 3.1 设置用户RV设备

- 由于目前RV设备不支持提供设备型号能力，提供设备型号选项让用户可以设置自己的RV设备型号清单（支持多款设备）；
- 提供增加/删除/设置默认设备（默认设备是唯一的，不支持多个）的功能。用户任何时候都可以维护该信息；
- 提供选项“使用默认设备进行资源推荐”，勾选后后续不提示选择设备型号，直接按照默认设备执行；

#### 3.2 设置/修改身份

- 提供身份设置功能，提供清晰的选项，用户可在查看了解隐私策略后设置是否为测试人员，让用户可以随时查看和修改其数据收集设置。（如在应用设置中添加一个开关，允许用户在安装后启用或禁用测试人员模式。）
- 默认状态为普通用户状态；

#### 3.3 更新后的确认机制

- 每次应用更新后，提示用户重新确认数据收集协议。
- 若用户未重新设置，则默认保持之前的设置不变。

#### 3.4 数据收集

- 在工具的运行过程中，定期（可以是退出程序时）将用户 ID 和使用数据（如命令执行情况、时间戳等）发送到后端服务器。

### 3.5 数据安全与隐私保护

- **数据加密传输**：确保收集的数据在传输过程中加密，防止泄露。
- **数据存储安全**：在服务器端采用严格的数据保护措施，确保数据安全。

### 4. 用户反馈机制

- 提供反馈渠道，允许用户报告遇到的问题和建议。
- 定期汇总用户反馈，优化功能和用户体验。

### 5. 安全与合规性

- 确保所有收集的数据符合当地法律法规（如个人信息保护法）。
- 提供数据删除选项，让用户可以随时删除其收集的数据。

**注意事项：通过采集这些信息，开发者可以更好地理解用户在网络环境中的行为，进而提升应用的网络性能和用户体验。同时，这也要求开发者对用户的数据安全和隐私保护承担起责任。**

* **隐私保护** ：在采集网络配置和连接信息时，应避免收集任何可以识别用户身份的信息，如个人IP地址等。
* **数据安全** ：确保采集的数据在传输和存储过程中得到加密保护。
* **用户同意** ：明确告知用户将收集哪些网络信息，并获得用户的同意。
